<!DOCTYPE html>
<html>
  <head>
    <title>Login</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="container">
      <h2>Edit CV</h2>
      <div id="loginResult"></div>
      <div id="loginForm">
        <div class="form">
          <label for="nome">Name:</label>
          <input
            type="nome"
            id="nome"
            name="nome"
            placeholder="Enter your name"
            required
          />
        </div>
        <div class="form">
          <label for="Idade">Age:</label>
          <input
            type="idade"
            id="idade"
            name="idade"
            placeholder="Enter your age"
            required
          />
        </div>
        <div class="form">
            <label for="escolaridade">Scholarity:</label>
            <input
              type="escolaridade"
              id="escolaridade"
              name="escolaridade"
              placeholder="Enter your scholarity"
              required
            />
          </div>
          <div class="form">
            <label for="experiencia">Experience:</label>
            <input
              type="experiencia"
              id="experiencia"
              name="experiencia"
              placeholder="Enter your experiencia"
              required
            />
          </div>
          <div class="form">
            <label for="curso">Course:</label>
            <input
              type="curso"
              id="curso"
              name="curso"
              placeholder="Enter your course"
              required
            />
          </div>
        <div class="form">
          <button type="button" onclick="submitChanges()">Submit</button>
          <button type="button" onclick="logout()">Logout</button>

        </div>
        <!--window.location='cv.html'-->
        
        <script>
            if(localStorage.token == undefined){
                window.location='login.html'
            }
        function logout(){
            localStorage.clear()
            window.location='login.html'
        }
          
        function submitChanges() {
        const nome = document.getElementById('nome').value;
        const idade = document.getElementById('idade').value;
        const escolaridade = document.getElementById('escolaridade').value;
        const experiencia = document.getElementById('experiencia').value;
        const curso = document.getElementById('curso').value;

        // Replace with your login endpoint URL
        const url = 'http://localhost:3000/api/cv/update/1';

        const requestBody = { nome, idade, escolaridade, experiencia, curso };

        fetch(url, {
          method: 'PUT',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + localStorage.token,
          },
          body: JSON.stringify(requestBody),
        })
          .then((response) => response.json())
          .then((data) => {
            console.log(data);
            // Handle signup response
            window.location='cv.html'
          })
          .catch((error) => {
            console.error('Error:', error);
          });
      }
        </script>
  </body>
</html>